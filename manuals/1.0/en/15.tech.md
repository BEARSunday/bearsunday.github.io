---
layout: docs-en
title: Technology
category: Manual
permalink: /manuals/1.0/en/tech.html
---
# Technology

This document explains the unique features and technologies of BEAR.Sunday, divided into the following chapters.

* [Architecture and Design Principles](#architecture-and-design-principles)
* [Performance and Scalability](#performance-and-scalability)
* [Developer Experience](#developer-experience)
* [Extensibility and Integration](#extensibility-and-integration)
* [Design Philosophy and Quality](#design-philosophy-and-quality)
* [Value Proposition of BEAR.Sunday](#value-proposition-of-bearsunday)

## Architecture and Design Principles

### Resource-Oriented Architecture (ROA)

BEAR.Sunday's ROA is an architecture that implements RESTful API within web applications. It is a core design principle of BEAR.Sunday, serving as both a hypermedia framework and a service-oriented architecture (SOA). Like the Web, ROA treats all data and functionality as resources, which can be manipulated through standardized interfaces such as GET, POST, PUT, and DELETE.

#### URI

URI (Uniform Resource Identifier) is a key element in the success of the Web and is central to BEAR.Sunday's ROA. By assigning URIs to all resources handled by the application, it becomes easier to identify and access them. URIs not only serve as resource identifiers but also express relationships between resources.

#### Uniform Interface

Resources are accessed using HTTP methods such as GET, POST, PUT, and DELETE. These methods define the operations that can be performed on resources, providing a common interface regardless of the resource type.

#### Hypermedia

In BEAR.Sunday's ROA, each resource provides affordances (available operations and functions for clients) through hyperlinking. These links represent the operations that clients can perform and guide navigation within the application.

#### Separation of Values and Representations

In BEAR.Sunday's ROA, the values of resources are separated from their representations. The values are managed by the application's domain logic, while representations express those values in various formats such as JSON, XML, or HTML. This separation results in loose coupling between domain logic and presentation logic.

#### Differences from MVC

BEAR.Sunday's ROA takes a different approach from traditional MVC (Model-View-Controller) architecture. While MVC separates an application into three components (model, view, and controller), BEAR.Sunday injects views into resource objects. Resources and views are loosely coupled, with clear separation of concerns.

Unlike MVC, where there are no constraints on the relationship between controllers and models, BEAR.Sunday uses hyperlinks and URIs to constrain the inclusion of other resources, allowing for declarative implementation.

### Dependency Injection (DI)

Dependency Injection (DI) is a crucial technique in object-oriented programming that enhances the design and structure of applications. The primary purpose of DI is to divide an application's functionality into multiple independent domains or roles and manage the dependencies between them.

DI helps in horizontally splitting a single function into multiple functions. The split functions become "dependencies" that can be independently developed and tested. By injecting these dependencies, which have clear responsibilities and roles based on the single responsibility principle, object reusability and testability are improved. Dependencies are also vertically split into other dependencies, forming a tree of dependencies.

BEAR.Sunday's DI utilizes an independent package called [Ray.Di](https://github.com/ray-di/Ray.Di), incorporating the design philosophy of Guice, Google's DI framework. It covers almost all the features of Guice.

Additionally, BEAR.Sunday's DI offers the following advantages:

* The ability to change bindings based on context, allowing for different implementations during testing.
* Enhanced code self-descriptiveness through attribute-based configuration.
* Improved runtime performance compared to other DI containers by resolving dependencies at compile time.
* Visualization of object dependencies as a graph, e.g., [Application Skeleton](/images/app.svg).

<img src="https://ray-di.github.io/images/logo.svg" width="180" alt="Ray.Di logo">

### Aspect-Oriented Programming (AOP)

Aspect-Oriented Programming (AOP) is a pattern that enhances application flexibility by separating core concerns (such as business logic) from cross-cutting concerns (such as logging and caching). Cross-cutting concerns refer to functionalities or processes that span multiple modules or layers. BEAR.Sunday's AOP allows for flexible configuration based on context by binding transversal processing declaratively using attributes in PHP. Ray.Aop, an independent package used by BEAR.Sunday, complies with the [AOP Alliance](https://aopalliance.sourceforge.net/) in Java and offers the following features:

AOP is often misunderstood as a technique that breaks existing order with its powerful capabilities. However, its true value lies in complementing areas where object-oriented programming falls short, such as exploratory function assignment using matchers and separation of transversal processing. AOP is a paradigm that enables the creation of transversal constraints within an application, functioning as an application framework.

## Performance and Scalability

### Event-Driven Content Strategy Based on ROA and Integration with Modern CDN

BEAR.Sunday, with its core ROA, integrates with instant-purgable CDNs like Fastly to implement an advanced event-driven caching strategy. Instead of traditional TTL (Time to Live) cache invalidation, this strategy instantly invalidates CDN, server-side caches, and ETags (Entity Tags) based on resource state change events.

By adopting this non-volatile approach to CDN content, BEAR.Sunday avoids SPOF (Single Point of Failure), ensuring high availability and fault tolerance. It also maximizes user experience and cost efficiency, enabling dynamic content to benefit from the same distributed caching as static content, thus realizing the Web's original principle of scalability and network cost reduction through distributed caching, empowered by modern technology.

#### Cache Invalidation Based on Semantic Methods and Dependencies

In BEAR.Sunday's ROA, each resource operation is assigned a semantic meaning. For example, the GET method retrieves a resource, while the PUT method updates it. These methods work in an event-driven manner, efficiently invalidating related caches. When a specific resource is updated, the caches of resources that depend on it are invalidated, ensuring data consistency and freshness, and providing users with the latest information.

#### ETag-Based Identity Verification and Fast Response

By setting ETags before system boot, BEAR.Sunday quickly verifies content identity and returns a 304 Not Modified response if there are no changes, minimizing network load.

#### Donut Caching and Partial Updates with ESI

BEAR.Sunday employs a donut caching strategy, utilizing ESI (Edge Side Includes) to enable partial content updates at the CDN edge. This technique allows dynamic updates of only the necessary parts without re-caching the entire page, improving cache efficiency.

The integration of BEAR.Sunday with Fastly, along with the ROA-based caching strategy, not only enables advanced distributed caching but also enhances application performance and resilience.

### Faster Boot-up

In the world of DI, users typically avoid direct handling of injectors (DI containers). Instead, they generate a single root object at the application entry point to start the application. In BEAR.Sunday's DI, there is essentially no manipulation of the DI container during configuration. Although the root object is large, it is a single variable that is reused across requests, resulting in an extremely optimized bootstrap process.

## Developer Experience

### Testability

BEAR.Sunday facilitates testing and makes it more effective due to the following design characteristics:

* Each resource is independent, and the stateless nature of REST requests simplifies testing.
  The separation of resource values and representations allows for testing the state of resources even when using HTML representations.
* API testing can be performed by following hypermedia links, using the same PHP and HTTP code.
* Contextual binding allows for injecting different implementations during testing.

### API Documentation Generation

API documentation is automatically generated from the code, ensuring consistency between the code and documentation and improving maintainability.

### Visualization and Debugging

By leveraging the feature of resources rendering themselves, BEAR.Sunday provides visualization of resource boundaries during development. It also enables monitoring of resource states and real-time reflection of changes made in online editors for PHP code or HTML templates.

## Extensibility and Integration

### Integration of PHP Interface and SQL Execution

BEAR.Sunday simplifies the management of SQL statement execution for database interactions through PHP interfaces. Without implementing classes, you can directly bind SQL execution objects to PHP interfaces. This approach connects the domain and infrastructure layers through PHP interfaces.

You can specify argument types, and if there are missing dependencies, DI will resolve them as strings. For example, if the current time is needed for SQL execution, it will be automatically bound without the need for manual passing, reducing the client's responsibility for passing all arguments.

Direct management of SQL also simplifies debugging by allowing direct observation of SQL query behavior, facilitating issue identification and resolution.

### Integration with Other Systems

BEAR.Sunday integrates with console applications, enabling access from both web and command-line interfaces without modifying the source code. Additionally, it allows parallel execution of different BEAR.Sunday applications within the same PHP runtime, eliminating the need for microservices and facilitating the coordination of multiple independent applications.

### Stream Output

By assigning streams, such as file pointers, to the body of a resource, BEAR.Sunday enables the output of large-scale content that cannot be handled in memory. Streams can coexist with regular variables, providing flexibility in handling large responses.

### Gradual Migration from Other Systems

BEAR.Sunday offers a gradual migration path, seamlessly integrating with other frameworks and systems like Laravel and Symfony. As a Composer package, BEAR.Sunday can be incrementally introduced into an existing codebase, allowing developers to leverage its features without a complete rewrite.

### Flexibility in Technology Migration

BEAR.Sunday protects your investment by considering future technological changes and evolving requirements. Even if you need to migrate to another framework or language, the resources built with BEAR.Sunday will not be wasted. In the PHP ecosystem, you can continue using BEAR.Sunday applications as Composer packages, and with BEAR.Thrift, you can efficiently access BEAR.Sunday resources from other languages. HTTP access is also possible without using Thrift. Additionally, SQL code is easily reusable.

Even if your libraries have strong dependencies on specific PHP versions, BEAR.Thrift allows you to coexist with different PHP versions.

## Design Philosophy and Quality

### Adoption of Standard Technologies and Avoidance of Proprietary Specifications

BEAR.Sunday embraces standard technologies and avoids proprietary specifications and rules as much as possible. For example, it supports JSON and www-form-urlencoded formats for HTTP request content negotiation by default and uses the [vnd.error+json](https://github.com/blongden/vnd.error) media type format for error responses. For resource linking, it adopts [HAL](https://datatracker.ietf.org/doc/html/draft-kelly-json-hal) (Hypertext Application Language) and utilizes [JsonSchema](https://json-schema.org/) for validation.

At the same time, BEAR.Sunday refrains from introducing its own validation rules or framework-specific specifications.

### Object-Oriented Principles

BEAR.Sunday emphasizes object-oriented principles to ensure the long-term maintainability of applications.

#### Composition Over Inheritance

BEAR.Sunday encourages the use of composition over inheritance. Directly calling methods from a parent class in a child class can increase coupling between classes. In BEAR.Sunday, the only abstract class that requires runtime inheritance for design purposes is `BEAR\Resource\ResourceObject`, and its methods exist solely for use by other classes. There is no instance in BEAR.Sunday where a framework's parent class method is called at runtime by a user.

#### Everything is Injection

In BEAR.Sunday, framework classes do not refer to "configuration files" or "debug constants" during execution to determine their behavior. Instead, dependencies corresponding to the desired behavior are injected. This approach eliminates the need to modify code when changing application behavior; you only need to change the binding of dependencies to interfaces. Constants like APP_DEBUG or APP_MODE do not exist in BEAR.Sunday. There is no way to know, nor is there a need to know, which mode the software is running in after it has started.

### Persistent Backward Compatibility

BEAR.Sunday is designed with a strong focus on maintaining backward compatibility, and since its release, it has continued to evolve without breaking backward compatibility. In modern software development, frequent backward-incompatible changes and the associated burden of modifications and testing are common challenges. However, BEAR.Sunday has successfully avoided these issues.

BEAR.Sunday not only adopts semantic versioning but also refrains from performing breaking changes in major version updates. The addition of new features or modification of existing ones does not affect existing code. Deprecated code is attributed but not removed, and it does not impact the behavior of existing code. Instead, new features are introduced, and evolution continues.

### Code Quality

To deliver high-quality applications, the BEAR.Sunday framework itself maintains a high level of code quality:

* The framework's code is analyzed with strict settings using static analysis tools like Psalm and PHPStan.
* It achieves 100% test coverage and nearly 100% type coverage.
* The system is primarily immutable, and tests do not require initialization, resulting in a clean and efficient testing process. BEAR.Sunday takes advantage of the power of PHP's asynchronous communication engines like Swoole.

## Value Proposition of BEAR.Sunday

### Value for Developers

* **Improved Productivity**: Based on robust design patterns and principles that remain unchanged over time, developers can focus on core business logic.
* **Team Collaboration**: By providing consistent guidelines and structures, BEAR.Sunday promotes collaboration among developers, ensuring unified and loosely coupled code, enhancing code readability and maintainability.
* **Flexibility and Extensibility**: The decision to exclude libraries from BEAR.Sunday gives developers the freedom and flexibility to choose components.
* **Testability**: DI (Dependency Injection) and ROA (Resource-Oriented Architecture) in BEAR.Sunday enhance testability.

### Value for Users

* **High Performance**: BEAR.Sunday's optimized fast boot-up and CDN-centric caching strategy deliver a fast and responsive user experience.
* **Reliability and Availability**: BEAR.Sunday's CDN-centric caching strategy minimizes SPOF (Single Point of Failure), ensuring stable and reliable service for users.
* **Usability**: BEAR.Sunday's superior connectivity simplifies integration with other languages and systems.

### Value for Businesses

* **Reduced Development Costs**: BEAR.Sunday's consistent guidelines and structures promote efficient and sustainable development processes, leading to reduced development costs.
* **Lower Maintenance Costs**: BEAR.Sunday's approach to maintaining backward compatibility minimizes the time and cost associated with adapting to changes, ensuring technological continuity.
* **High Extensibility**: BEAR.Sunday enables easy application extension by modifying behavior with minimal code changes, utilizing techniques like DI (Dependency Injection) and AOP (Aspect-Oriented Programming) to accommodate business growth and changes.
* **Superior User Experience (UX)**: BEAR.Sunday's high performance and availability contribute to user satisfaction, fostering customer loyalty, expanding the customer base, and driving business success.

Excellent constraints remain unchanged. The constraints imposed by BEAR.Sunday bring specific value to developers, users, and businesses alike.

BEAR.Sunday is a framework designed based on the principles and spirit of the Web, empowering developers with clear constraints to build flexible and robust applications.
